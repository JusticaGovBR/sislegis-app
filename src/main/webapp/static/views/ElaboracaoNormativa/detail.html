<header>
    <h3>Elaboração Normativa</h3>
</header>

<div class="tabs">
  <div ng-click="selected = 'dadosPreliminares'" ng-class="{'selected': selected == 'dadosPreliminares'}" class="tab">Dados preliminares</div>
  <div ng-click="selected = 'dadosAnalise'" ng-class="{'selected': selected == 'dadosAnalise'}" class="tab">Dados de análise/Distribuição</div>
  <div ng-click="selected = 'manifestacao'" ng-class="{'selected': selected == 'manifestacao'}" class="tab">Manifestação</div>
 </div>
 
 
  <div ng-show="selected == 'dadosPreliminares'" class="tab_content">
      <div class="row divider-top">
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Tipo:</label>
			<select ng-model="elaboracaoNormativa.tipo" ng-options="tipo.shade as tipo.name for tipo in tipos" class="form-control"></select>
              </div>
          </div>
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Objeto: </label>
                  <select ng-model="elaboracaoNormativa.identificacao" ng-options="identificacao.shade as identificacao.name for identificacao in identificacoes" class="form-control"></select>
              		
              </div>
          </div>
    	<div class="col-md-2">
              <div class="form-group">
                  <label for="">Número: </label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.numero">
              </div>
          </div>
    	<div class="col-md-1">
              <div class="form-group">
                  <label for="">Ano: </label>
                  <input type="text" size="4" class="form-control" ng-model="elaboracaoNormativa.ano">
              </div>
          </div>          
      </div>

      <div class="row divider-top">
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Órgão de Origem:</label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.origem" placeholder="Pesquisar..."
	              			typeahead="item as item.nome for item in getOrigemElaboracaoNormativas($viewValue)">
              </div>
          </div>
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Co-Autor</label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.coAutor" placeholder="Pesquisar..."
	              			typeahead="item as item.nome for item in getCoAutor($viewValue)">
              </div>
          </div>
      </div>
  
      <div class="row divider-top">
          <div class="col-md-6">
              <div class="form-group">
                  <label for="">Ementa:</label>
                  <textarea class="form-control" ng-model="elaboracaoNormativa.ementa" />
              </div>
          </div>
      </div>
      
      
      <div class="row divider-top">
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Data de inclusão no SIDOF:</label>
				<p class="input-group">
						<input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="elaboracaoNormativa.dataInclusaoSIDOF" is-open="opened_dataInclusaoSIDOF" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" close-text="Close"/>
	            				<span class="input-group-btn">
			                <button type="button" class="btn btn-default" ng-click="openCalendar($event, 'dataInclusaoSIDOF')"><i class="glyphicon glyphicon-calendar"></i></button>
			    		</span>		    		
			    </p>
			    </div>	
       	</div>
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Data de Assinatura no SIDOF:</label>
				<p class="input-group">
						<input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="elaboracaoNormativa.dataAssinaturaSIDOF" is-open="opened_dataAssinaturaSIDOF" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" close-text="Close"/>
	            				<span class="input-group-btn">
			                <button type="button" class="btn btn-default" ng-click="openCalendar($event, 'dataAssinaturaSIDOF')"><i class="glyphicon glyphicon-calendar"></i></button>
			    		</span>		    		
			    </p>
			    </div>	
       	</div>
      </div>      
 
      <div class="row divider-top">
    	<div class="col-md-3">
              <div class="form-group">
                  <label for="">Nº de Protocolo (NUP): </label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.nup">
              </div>
          </div>      
      
          <div class="col-md-3">
   	                 <label for="">Tags:</label>
					 <tags-input ng-model="elaboracaoNormativa.tags">
					 	<auto-complete source="loadTags($query)"></auto-complete>
					 </tags-input>	        
          </div>
       </div>        
   
      <div class="row divider-top">
          <div class="col-md-3">
              <div class="form-group">
                  <label for="">Situação:</label>
              	<select ng-model="elaboracaoNormativa.elaboracaoNormativaSituacao" ng-options="elaboracaoNormativaSituacao.shade as elaboracaoNormativaSituacao.name for elaboracaoNormativaSituacao in situacoes" class="form-control"></select>
              </div>
          </div>
          <div class="col-md-3">
              <div class="form-group">
              	<label for="">Status no SIDOF: </label>
              	<select ng-model="elaboracaoNormativa.statusSidof.id" ng-options="statusSidof.id as statusSidof.descricao for statusSidof in listaStatusSidof" class="form-control"></select>
              </div>
          </div>
      </div>   

	 <div>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Minuta</button>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Proposta Oficial</button>
	</div>


</div>
  <div ng-show="selected == 'dadosAnalise'" class="tab_content">
       <div class="row divider-top">

             <div class="col-sm-3">
                 <div class="form-group">
                     <label for="">Data de Distribuição:</label>
				<p class="input-group">
						<input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="elaboracaoNormativa.dataDistribuicao" is-open="opened_dataDistribuicao" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" close-text="Close"/>
			          				<span class="input-group-btn">
			                <button type="button" class="btn btn-default" ng-click="openCalendar($event, 'dataDistribuicao')"><i class="glyphicon glyphicon-calendar"></i></button>
			    		</span>
			    </p>
                 </div>
             </div>
             <div class="col-sm-3">
                 <div class="form-group">
                     <label for="">Distribuição:</label>
                     <select ng-change="selectParecerista()" ng-model="elaboracaoNormativa.equipe.id" ng-options="equipe.id as equipe.nome for equipe in equipes" class="form-control"></select>
                 </div>
             </div>
             <div class="col-sm-3">
                 <div class="form-group">
                     <label for="">Parecerista:</label>
                     <select ng-model="elaboracaoNormativa.parecerista.id" ng-options="usuario.id as usuario.nome for usuario in elaboracaoNormativa.pareceristas" class="form-control"></select>
                 	{{elaboracaoNormativa.usuario}}
                 </div>
             </div>                    
                    

            </div>
            <div class="row">
            <div class="col-sm-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
						<div class="row">
                        	<div class="form-group">
                            	<label for="">Comentários:</label>
                            	<textarea ng-model="comentario.descricao" class="form-control" />
                        	</div>
						</div>	
                        <div class="form-group">
                        	<button type="button" class="btn btn-primary" ng-click="adicionarComentario(comentario)"><i class="fa fa-plus"></i> Adicionar</button>
                        </div>
                    </div>
                    <ul class="list-group" ng-repeat="itemComentario in elaboracaoNormativa.listaComentario">
                        <li class="list-group-item">
                            {{itemComentario.descricao}}
                        </li>

                    </ul>
              </div>
         	</div>
            <div class="col-sm-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
	                         <div class="col-sm-6">
	                             <div class="form-group">
		                                <label for="">Área consultada:</label>
		                                <input type="text" ng-model="elaboracaoNormativaConsulta.areaConsultada" class="form-control" placeholder="Pesquisar..."
			              					typeahead="item as item.descricao for item in getAreaConsultadas($viewValue)"
			              					typeahead-on-select="onSelectAreaConsultadas($item)">
		                            </div>
	                         </div>
				             <div class="col-sm-6">
				                 <div class="form-group">
				                     <label for="">Prazo de resposta:</label>
								<p class="input-group">
										<input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="elaboracaoNormativaConsulta.prazoResposta" is-open="opened_prazoResposta" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" close-text="Close"/>
							          				<span class="input-group-btn">
							                <button type="button" class="btn btn-default" ng-click="openCalendar($event, 'prazoResposta')"><i class="glyphicon glyphicon-calendar"></i></button>
							    		</span>
							    </p>
				                 </div>
				             </div>	                         

                        </div>
                        <!-- TODO: Aguardando a definição da infra para armazenamento dos arquivos -->
<!--                         <div class="row">
                            <div class="form-group">
                                <label for="">Anexo:</label>
                                <input type="file" nv-file-select uploader="distribuicaoUploader" ng-click="distribuicaoUploader.clearQueue()" />
				 				<div ng-repeat="item in distribuicaoUploader.queue">
									 <div class="progress" style="margin-bottom: 0;">
										<div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
										<span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> 
										<span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> 
										<span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
										</div>
									 </div>
								</div>
					 	</div> -->                      
                        <div class="form-group">
                        	<button type="button" class="btn btn-primary" ng-click="adicionarElaboracaoNormativaConsulta()"><i class="fa fa-plus"></i> Adicionar</button>
                        </div>
                    </div>
                    <ul class="list-group" ng-repeat="elaboracaoNormativaConsulta in elaboracaoNormativa.listaElaboracaoNormativaConsulta">
                        <li class="list-group-item">
                            <button type="button" class="close" ng-click="excluirElaboracaoNormativa()"><span aria-hidden="true">&times;</span><span class="sr-only">Excluir</span>
                            </button>
	                      		<div class="form-group">
					            	<label for="">Área consultada:</label>
					            	{{elaboracaoNormativaConsulta.areaConsultada.descricao}}
					            </div>	
	                      		<div class="form-group">
					            	<label for="">Prazo:</label>
					            	{{elaboracaoNormativaConsulta.prazoResposta | date:'dd/MM/yyyy'}}
					            </div>
		                        <div class="form-group">
	                            	<label for="">Resumo da resposta:</label>
	                            	<textarea ng-model="elaboracaoNormativaConsulta.comentario" class="form-control" />
	                        	</div>				            	                            
                        </li>

                    </ul>
              </div>
            </div>
     </div>   
	 <div>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Minuta</button>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Proposta Oficial</button>
	</div>     
</div>
 <div ng-show="selected == 'manifestacao'" class="tab_content">
    <div class="row divider-top">
         <div class="col-md-4">
             <div class="form-group">
                 <label for="">Ementa:</label>
                 <textarea class="form-control" ng-model="elaboracaoNormativa.ementaManifestacao" />
             </div>
         </div>    
        <div class="col-md-4">
            <div class="form-group">
            <label for="">Data Nota SAL:</label>
				<p class="input-group">
						<input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="elaboracaoNormativa.dataManifestacao" is-open="opened_dataManifestacao" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" close-text="Close"/>
             				<span class="input-group-btn">
			                <button type="button" class="btn btn-default" ng-click="openCalendar($event, 'dataManifestacao')"><i class="glyphicon glyphicon-calendar"></i></button>
			    		</span>
			    </p>
            </div>
        </div>

	<div class="col-md-4">
            <div class="form-group">
                <label for="">Arquivo da nota:</label>
                <input type="file" nvcover bass the miracle u2-file-select uploader="manifestacaoUploader" ng-click="manifestacaoUploader.clearQueue()" />
                 <p>Arquivo atual: <a href="{{elaboracaoNormativa.arquivoManifestacao}}">{{elaboracaoNormativa.arquivoManifestacao}}</a><p>
                
                <div ng-repeat="item in manifestacaoUploader.queue">
				 <div class="progress" style="margin-bottom: 0;">
					<div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
					<span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> 
					<span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> 
					<span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
					</div>
				 </div>
			 </div>
            </div>
        </div>
        
     <div class="row divider-top">
        <div class="col-md-4">
            <div class="form-group">
                <label for="">Norma Gerada:</label>
                <select class="form-control" ng-model="elaboracaoNormativa.elaboracaoNormativaNorma" ng-options="norma.shade as norma.name for norma in normas"></select>
            </div>
        </div>

     </div>   

      <div class="row divider-top">
          <div class="col-md-4">
              <div class="form-group">
                  <label for="">Link: </label>
                  <input type="text" size="4" class="form-control" ng-model="elaboracaoNormativa.normaGeradaLink">
              </div>
          </div>        
    	  <div class="col-md-2">
              <div class="form-group">
                  <label for="">Número: </label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.normaGeradaNumero">
              </div>
          </div>
    	<div class="col-md-1">
              <div class="form-group">
                  <label for="">Ano: </label>
                  <input type="text" class="form-control" ng-model="elaboracaoNormativa.normaGeradaAno">
              </div>
          </div>  
      </div>              
     
	 <div>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Minuta</button>
	    <button type="button" class="btn btn-primary" ng-click="salvar()" ng-disabled="distribuicaoUploader.isUploading || manifestacaoUploader.isUploading">Salvar como Proposta Oficial</button>
	</div>      
        
 </div>
  

  







 